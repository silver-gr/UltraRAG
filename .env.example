# UltraRAG Configuration Example
# Copy this file to .env and fill in your values

# ===== REQUIRED SETTINGS =====

# Path to your Obsidian vault
OBSIDIAN_VAULT_PATH=/path/to/your/obsidian/vault

# Google API Key (for Gemini LLM)
GOOGLE_API_KEY=your_google_api_key_here


# ===== EMBEDDING MODEL =====

# Options: voyage-3.5-lite, voyage-3-large, qwen3-8b, openai-3-large
# - voyage-3.5-lite: Best value (free tier: 200M tokens)
# - voyage-3-large: Highest quality (paid, requires VOYAGE_API_KEY)
# - qwen3-8b: Best open-source (free, self-hosted)
# - openai-3-large: Good balance (requires OPENAI_API_KEY)
EMBEDDING_MODEL=voyage-3.5-lite

# Token limit for embedding model (default: 200M for free tier)
EMBEDDING_TOKEN_LIMIT=200000000

# Chunking configuration
CHUNK_SIZE=512
CHUNK_OVERLAP=75

# Chunking strategy
# Options:
#   - obsidian_aware: Structure-preserving (recommended for Obsidian)
#   - markdown_semantic: Markdown + semantic splitting
#   - late_chunking: Best accuracy (+10-12%), slower indexing
#   - semantic: Pure semantic chunking
#   - simple: Fast, basic sentence splitting
CHUNKING_STRATEGY=obsidian_aware

# Late chunking configuration (if using late_chunking strategy)
# Alpha controls balance between local (chunk) and global (document) context
# Values: 0.0-1.0 (default: 0.7 = 70% local, 30% global)
LATE_CHUNKING_ALPHA=0.7


# ===== VECTOR DATABASE =====

# Options: lancedb, qdrant
# - lancedb: Embedded, zero-setup (recommended for personal use)
# - qdrant: Production-grade, scalable (requires Qdrant server)
VECTOR_DB=lancedb

# LanceDB settings
LANCEDB_PATH=./data/lancedb

# Qdrant settings (if using Qdrant)
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=obsidian_notes


# ===== LLM SETTINGS =====

# LLM model (default: gemini-2.0-flash-exp)
LLM_MODEL=gemini-2.0-flash-exp
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=8192


# ===== RETRIEVAL SETTINGS =====

# Number of chunks to retrieve initially
TOP_K=75

# Number of chunks after reranking
RERANK_TOP_N=10

# Reranker model to use
# Options: voyage-rerank-2.5, voyage-rerank-2 (requires VOYAGE_API_KEY)
# - voyage-rerank-2.5: Latest model (free tier: 200M tokens)
RERANKER_MODEL=rerank-2.5

# Token limit for reranker model (default: 200M for free tier)
RERANKER_TOKEN_LIMIT=200000000

# Enable hybrid search (vector + query fusion)
ENABLE_HYBRID_SEARCH=true

# Similarity threshold (0.0-1.0)
SIMILARITY_THRESHOLD=0.3

# Query transformation method for improved retrieval
# Options:
#   - hyde: Hypothetical Document Embeddings (generates hypothetical answer, embeds that)
#   - multi_query: Generates multiple query variations (3-5) and combines results
#   - both: Combines HyDE + multi-query for maximum recall
#   - none/disabled: No query transformation
QUERY_TRANSFORM_METHOD=hyde

# Number of query variations for multi_query or both methods
QUERY_TRANSFORM_NUM_QUERIES=3

# Self-correction settings (Self-RAG and CRAG patterns)
# Enable self-correcting retrieval with relevance grading and query refinement
USE_SELF_CORRECTION=true

# Maximum number of retry attempts if retrieval is AMBIGUOUS or INCORRECT
SELF_CORRECTION_MAX_RETRIES=2


# ===== GRAPH DATABASE (OPTIONAL, PHASE 2) =====

# Enable graph-based search
ENABLE_GRAPH_SEARCH=false

# Neo4j settings (if using graph features)
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your_neo4j_password


# ===== API KEYS =====

# Voyage AI (for embeddings and reranking)
# Get free key at: https://www.voyageai.com/
VOYAGE_API_KEY=your_voyage_api_key_here

# OpenAI (if using OpenAI embeddings)
# Get key at: https://platform.openai.com/
OPENAI_API_KEY=your_openai_api_key_here


# ===== NOTES =====
# 
# Recommended setup for beginners:
# - EMBEDDING_MODEL=qwen3-8b (free, no API key needed)
# - VECTOR_DB=lancedb (no server setup needed)
# - GOOGLE_API_KEY=<your key> (Gemini has generous free tier)
#
# Recommended setup for best quality:
# - EMBEDDING_MODEL=voyage-3-large
# - VECTOR_DB=lancedb
# - VOYAGE_API_KEY=<your key>
# - GOOGLE_API_KEY=<your key>
#
# Cost estimate (1,650 notes):
# - Initial indexing: $13-40 (one-time with Voyage)
# - Monthly usage: $5-20 (moderate use)
# - Self-hosted: $0 (using qwen3-8b + Gemini free tier)
